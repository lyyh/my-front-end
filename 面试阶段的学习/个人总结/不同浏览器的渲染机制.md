### 浏览器的重要功能  
是将用户选择得web资源呈现出来，从服务器获取请求的资源，在浏览器上选择出来  

1.用户界面－ 包括地址栏、后退/  前进按钮、书签目录等，也就是你所看到的除了用来显示你所请求页面的主窗口之外的其他部分  
2.浏览器引擎－ 用来查询及操作渲染引擎的接口  
3.渲染引擎－ 用来显示请求的内容，例如，如果请求内容为html，它负责解析html及css，并将解析后的结果显示出来
4.网络－ 用来完成网络调用，例如http请求，它具有平台无关的接口，可以在不同平台上工作  
5.UI 后端－ 用来绘制类似组合选择框及对话框等基本组件，具有不特定于某个平台的通用接口，底层使用操作系统的用户接口  
6.JS解释器－ 用来解释执行JS代码  
7.数据存储－ 属于持久层，浏览器需要在硬盘中保存类似cookie的各种数据，HTML5定义了web database技术，这是一种轻量级完整的客户端存储技术  

### 文档对象模型  
一个包含一些文本和一幅图片的普通 HTML 页面。浏览器如何处理此页面？   
1.转换:  
 浏览器从磁盘或网络读取 HTML 的原始字节，并根据文件的指定编码（例如 UTF-8）将它们转换成各个字符。  
2.令牌化:  
浏览器将字符串转换成 W3C HTML5 标准规定的各种令牌，例如，“<html>”、“<body>”，以及其他尖括号内的字符串。每个令牌都具有特殊含义和一组规则。    
转化:将html字符串转化成令牌    
3.词法分析:  
发出的令牌转换成定义其属性和规则的“对象”。    
转化:将令牌转换成对象  
4.DOM树构建  
最后，由于 HTML 标记定义不同标记之间的关系（一些标记包含在其他标记内），创建的对象链接在一个树数据结构内，此结构也会捕获原始标记中定义的父项-子项关系：HTML 对象是 body 对象的父项，body 是 paragraph 对象的父项，依此类推。    

总得来说就是将字节转化成htnml字符，将html转化成令牌，再将令牌转化成节点，构建DOM树。  

### css对象模型  
与处理HTML基本一样，CSS 字节转换成字符，接着转换成令牌和节点，最后链接到一个称为“CSS 对象模型”(CSSOM) 的树结构内   

CSSOM为什么具有树结构?
为页面上的任何对象计算最后一组样式，，浏览器都会先从适用于该节点的最通用规则开始（例如，如果该节点是 body 元素的子项，则应用所有 body 样式），然后通过应用更具体的规则（即规则“向下级联”）以递归方式优化计算的样式。  

还请注意，以上树并非完整的 CSSOM 树，它只显示了我们决定在样式表中替换的样式。每个浏览器都提供一组默认样式（也称为“用户代理样式”），即我们不提供任何自定义样式时所看到的样式，我们的样式只是替换这些默认样式  

### 渲染引擎  
渲染引擎 Rendering engines  
本文所讨论得浏览器——Firefox、Chrome和Safari是基于两种渲染引擎构建的，Firefox使用Geoko——Mozilla自主研发的渲染引擎，Safari和Chrome都使用webkit。  

#### webkit主流程:  
解析html以构建dom树->构建render树->布局render树->绘制render树  

生成render树:  
渲染引擎开始解析html，并将标签转化为内容树中的dom节点。接着，它解析外部CSS文件及style标签中的样式信息。这些样式信息以及html中的可见性指令将被用来构建另一棵树——render树。    

render树由一些包含有颜色和大小等属性的矩形组成，它们将被按照正确的顺序显示到屏幕上。    

布局render树:   
Render树构建好了之后，将会执行布局过程，它将确定每个节点在屏幕上的确切坐标。再下一步就是绘制，即遍历render树，并使用UI后端层绘制每个节点。  

为了更好的用户体验，渲染引擎会尽可能的早将内容呈现在屏幕上。并不会等到所有的html都解析完成之后再去构建和布局render树。它是解析完一部分内容就显示一部分内容，同时，可能还在通过网络下载其余内容。  

### 参考资料
[不同浏览器的渲染机制](http://blog.jobbole.com/12749/?repeat=w3tc)  
