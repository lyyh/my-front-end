## 情况假设
假设情况:  
1.有多个标签个人信息、考试查询、个人成绩。  
2.在显示学生成绩一览，会做大量的成绩分析，这个时候就使用loading    

情况分析:
1.所有的Ajax请求都是异步的,我的封装中做一个100毫秒的setTimeout延时.这样就可以有效的解决用户快速重复点击的问题.　足够快的时候,前一请求并没有真正的发出来.就被clearTimeout清除掉了. abort掉Ajax的请求也会有服务端响应,需要消耗资源.
2.如果用户的操作不并足够快.比如点了保存按钮,在服务器没有返回成功的时候,再次点了保存按钮.(事实上两次请求是一样的.而我们更希望第一次的请求是有效的,第二次的可以不做处理).在封装中,我们检查传入ajax的请url及参数是否一致,如果一致.则第二次的AJAX并不发出.
3.最后一种情况,两次相间的请求是不同的请求,比如楼上说快速切换Tab的例子.无法,只能abort掉前一个Ajax请求了.
4.但是每一次点击ajax请求回数时间比较长，也就是第二次请求可能比第一次先回数这种特殊情况的

多次点击会重复发送请求，为了减轻服务器的负载，采用abort方法和函数节流   

简单的思路又有外部变量锁定和修改按钮状态的方式，有几个要考虑的问题：
1.要考虑并理解 success, complete, error, timeout   2.这些事件的区别，并注册正确的事件，一旦失误，功能将不再可用；  
3.不可避免地比普通流程要要多注册一个 complete 事件；  
4.恢复状态的代码很容易和不相干的代码混合在一起；  

## 解决思路
根据实际情况，封装自己的Ajax对象  
### abort
XMLHTTPRequest.abort()终止请求。然后进入fail方法。  
$.get系列返回的数据类型是XMLHTTPRequest（$.post、$.ajax、$.getJSON、$.getScript也同样）  
### 定时器setTimeOut+clearTimeOut
考虑到abort终止掉Ajax的请求也会有服务端的响应，需要消耗资源。所以可以设置一个定时器，避免段时间内发送相同的请求。  
所有的Ajax请求都是异步的,我的封装中做一个100毫秒的setTimeout延时.这样就可以有效的解决用户快速重复点击的问题.　足够快的时候,前一请求并没有真正的发出来.就被clearTimeout清除掉了. abort掉Ajax的请求也会有服务端响应,需要消耗资源.  

### 判断相同的请求
如果用户的操作不并足够快.比如点了保存按钮,在服务器没有返回成功的时候,再次点了保存按钮.(事实上两次请求是一样的.而我们更希望第一次的请求是有效的,第二次的可以不做处理).在封装中,我们检查传入ajax的请url及参数是否一致,如果一致.则第二次的AJAX并不发出.  

### 第二次请求比第一次请求先返回
每次点击都发请求，往回调里加闭包带唯一递增的id，每一次请求回调以后看这个id是不是主函数体里最后一次点击的id，是则调用回调，不是则返回，也就是ajax回数后看这个回调是不是最后一次点击的回调，不是就不操作页面了  

使用闭包来存储当前id,与全局ID进行比较  

### 之后的思考
由于对jQuery ajax API不熟悉，请求处理之前的预处理器，实际原理和第一种一样，放个请求数组，判断是否有这个请求了，有就不处理了，所谓的丢弃，就是不处理。原理一样，只是这回你不用这每一个ajax里写补一个状态变化。（少点代码） 

### ajaxPrefilter
ajax请求之前的预处理器。在请求被jQuery.ajax处理之前，可以通过这个接口去干涉每一个请求的配置  
将发送后的请求放在一个对象里面，在响应之前再次请求回中断之前的请求。  

### 参考资料
[怎样防止重复发送 Ajax 请求？](https://www.zhihu.com/question/19805411)  




